webpackJsonp([34],{QrnV:function(e,t){},uDNo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("ZLEe"),r=a.n(s),o=a("Q0Ca"),n=a("nOCI"),l=a("HD6+"),i=a("uDR4"),u=a("57ou"),m=a("5s9g"),c=a("b6Af"),d=null,f={name:"employeesList",components:{employeesAdd:u.default,employeesPositive:m.default,employeesSet:c.default},data:function(){return{employeesAdd:"employeesAdd",employeesPositive:"employeesPositive",employeesSet:"employeesSet",baseData:[],dataList:[],seleList:[],common:[],totals:{},pageTitle:"用户",text:"",tableKey:0,listLoading:!0,stausInfo:"在职",counts:"",showHeight:40,showMore:!1,boxHeight:"",barSearch:{alertText:""},requestParameters:{page:1,pagesize:10,gender:this.gender,keyword:this.keyword,formOfEmployment:this.formOfEmployment,department:this.department,accountStatus:this.accountStatus,formOfManagement:this.formOfManagement,workingCity:this.workingCity},loading:!1,multipleSelection:[],dialogVisible:!1,iconShow:!0,searchShow:!1,objInfoDataes:[],setData:{dateOfBirth:{},fullName:{},mobilePhone:{},sex:{},theHighestDegreeOfEducation:{}},formData:{timeOfEntry:"",mobilePhone:"",fullName:"",workNumber:"",formOfEmployment:"",department:"",formOfManagement:"",workingCity:"",correctionTime:"",accountStatus:"",informalType:"",positiveId:""},ruleInline:{fullName:[{required:!0,message:"用户名不能为空",trigger:"blur"}],mobilePhone:[{validator:o.checkPhone,trigger:"blur"}],timeOfEntry:[{required:!0,message:"请选择入职时间",trigger:"change"}],formOfEmployment:[{required:!0,message:"请选择聘用形式",trigger:"change"}]}}},filters:{formatDate:function(e){if(0!==e){var t=new Date(e);return Object(o.formatDate)(t,"yyyy-MM-dd hh:mm")}}},computed:{tables:function(){var e=this.requestParameters.keyword;return e?this.dataList.items.filter(function(t){return r()(t).some(function(a){return String(t[a]).toLowerCase().indexOf(e)>-1})}):this.dataList.items}},methods:{doQuery:function(e){var t=this;this.listLoading=!0,Object(i.j)(this.requestParameters).then(function(e){t.dataList=e.data,t.counts=e.data.counts,t.totals=e.data.totals,t.barSearch.alertText="共 "+t.counts+" 条记录",t.listLoading=!1;for(var a=0;a<t.dataList.items.length;a++)for(var s=0;s<t.baseData.informaltype.length;s++)t.dataList.items[a].formOfEmployment===t.baseData.informaltype[s].id&&(t.dataList.items[a].formOfEmployment=t.baseData.informaltype[s].value),"1"===t.dataList.items[a].formOfEmployment&&(t.dataList.items[a].formOfEmployment="正式")}).catch(function(e){t.$message.e("错了哦，这是一条错误消息")})},clearFormDate:function(){this.formData.fullName="",this.formData.mobilePhone="",this.formData.timeOfEntry="",this.formData.formOfEmployment="",this.formData.workNumber="",this.formData.department="",this.formData.managementForm="",this.formData.workingCity="",this.formData.correctionTime=""},handleLoadDataList:function(){this.doQuery()},handleCloseModal:function(){this.$refs.addUser.dialogFormH(),this.$refs.positive.dialogFormH()},handleStatus:function(e){var t=this;"true"===e.accountStatus?e.accountStatus="1":e.accountStatus="0";var a={id:e.id,status:e.accountStatus};Object(i.a)(a).then(function(e){t.$message.success("设置成功!"),t.doQuery(t.requestParameters)})},setupUI:function(){this.baseData=n.a,this.common=l.a,this.boxHeight=Object(o.minHeight)()},handleRest:function(){this.requestParameters={gender:"",formOfEmployment:"",department:"",bindingState:"",accountStatus:"",management:"",workingCity:""},d.requestParameters={},d.seleList=[]},toggleShowMore:function(){this.showMore=!this.showMore},seleClose:function(e){for(var t in this.seleList.splice(this.seleList.indexOf(e),1),this.requestParameters)this.requestParameters[t]===e&&(this.requestParameters[t]="")},searchIcon:function(){this.iconShow=!1,this.searchShow=!0},handleClear:function(){this.iconShow=!0,this.searchShow=!1,this.doQuery(this.requestParameters)},dataSearch:function(){this.doQuery(this.requestParameters)},handleSearch:function(){this.requestParameters.page=1,this.doQuery(this.requestParameters);var e=[];for(var t in this.requestParameters)void 0!==this.requestParameters[t]&&this.requestParameters[t]!==this.requestParameters.page&&this.requestParameters[t]!==this.requestParameters.pagesize&&e.push(this.requestParameters[t]);this.seleList=e},handleSizeChange:function(e){this.requestParameters.pagesize=e,1===this.requestParameters.page&&d.doQuery(this.requestParameters)},handleCurrentChange:function(e){this.requestParameters.page=e,d.doQuery()},handlAdd:function(){this.$refs.addUser.dialogFormV()},handlPositive:function(e){var t=this;this.formData.positiveId=e,Object(i.n)({id:e}).then(function(e){t.objInfoDataes=e.data,""!==e.data.headPortrait&&t.$refs.positive.fillDownload(e.data.headPortrait)}),this.$refs.positive.dialogFormV(e)},handlSet:function(){var e=this;this.$refs.set.dialogFormV(),Object(i.q)().then(function(t){e.setData.dateOfBirth=t.data.dateOfBirth,e.setData.fullName=t.data.fullName,e.setData.mobilePhone=t.data.mobilePhone,e.setData.sex=t.data.sex,e.setData.theHighestDegreeOfEducation=t.data.theHighestDegreeOfEducation})},handleDelete:function(e){var t=this;this.$confirm("本次操作将删除"+e.fullName+e.mobilePhone+"删除后账号将不可恢复，您确认删除吗？",{type:"warning"}).then(function(){t.$message.success("删除成功!"),d.dataList.items.splice(e,1)}).catch(function(){t.$message.info("已取消操作!")})}},mounted:function(){},created:function(){d=this,this.setupUI(),this.doQuery()},updated:function(){}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("el-card",[a("span",{staticClass:"seleInfo"},[a("el-select",{model:{value:e.stausInfo,callback:function(t){e.stausInfo=t},expression:"stausInfo"}},e._l(e.baseData.stausInfos,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("span",{staticClass:"posInfo"},[e._v("\n        本月  ("+e._s(e.totals.range)+")  \n        "),a("span",[e._v("在职：\n          "),a("em",[e._v(e._s(e.totals.actives))])]),e._v(" "),a("span",[e._v("入职：\n          "),a("em",{staticClass:"active"},[e._v(e._s(e.totals.news))])]),e._v(" "),a("span",[e._v("离职：\n          "),a("em",{staticClass:"disabled"},[e._v(e._s(e.totals.leaves))])])]),e._v(" "),a("div",{staticClass:"fr"},[a("span",{staticClass:"iconInfo"},[a("span",{staticClass:"serachInput"},[a("i",{directives:[{name:"show",rawName:"v-show",value:e.iconShow,expression:"iconShow"}],staticClass:"fa fa-search",attrs:{"aria-hidden":"true",title:"搜索"},on:{click:e.searchIcon}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.searchShow,expression:"searchShow"}],attrs:{placeholder:"搜索",clearable:""},on:{clear:e.handleClear},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataSearch(e.itemes,e.index)}},model:{value:e.requestParameters.keyword,callback:function(t){e.$set(e.requestParameters,"keyword",t)},expression:"requestParameters.keyword"}})],1)]),e._v(" "),a("router-link",{staticClass:"el-button el-button--primary el-button--mini",attrs:{to:{path:"/employees/import/",query:{name:"员工"}},title:"导入"}},[e._v("导入")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",title:"设置"},on:{click:e.handlSet}},[e._v("设置")]),e._v(" "),a("router-link",{staticClass:"el-button el-button--primary el-button--mini",attrs:{to:{path:"/employees/archiving/"},title:"历史归档"}},[e._v("历史归档")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.handlAdd}},[e._v("新增员工")]),e._v(" "),a("router-link",{staticClass:"el-button el-button--primary el-button--mini",attrs:{to:{path:"/employees/report/"+e.totals.month}}},[e._v(e._s(e.totals.month)+"月份报表")])],1)]),e._v(" "),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"boxMar",style:{minHeight:e.boxHeight},attrs:{shadow:"never"}},[a("el-form",{ref:"requestParameters",staticClass:"formInfo",attrs:{inline:!0,model:e.requestParameters,"label-width":"150px"}},[a("div",{staticStyle:{overflow:"hidden"},style:{height:e.showMore?"auto":e.showHeight+"px"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"性别："}},[a("el-radio-group",{model:{value:e.requestParameters.gender,callback:function(t){e.$set(e.requestParameters,"gender",t)},expression:"requestParameters.gender"}},e._l(e.baseData.gender,function(t){return a("el-radio",{key:t.id,attrs:{label:t.value,value:t.value}},[e._v("\n                  "+e._s(t.value)+"\n                  ")])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"聘用形式："}},[a("el-radio-group",{model:{value:e.requestParameters.formOfEmployment,callback:function(t){e.$set(e.requestParameters,"formOfEmployment",t)},expression:"requestParameters.formOfEmployment"}},e._l(e.baseData.hireType,function(t){return a("el-radio",{key:t.id,attrs:{label:t.value,value:t.value}},[e._v("\n                "+e._s(t.value)+"\n                ")])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"管理形式："}},[a("el-radio-group",{model:{value:e.requestParameters.formOfManagement,callback:function(t){e.$set(e.requestParameters,"formOfManagement",t)},expression:"requestParameters.formOfManagement"}},e._l(e.baseData.subjection,function(t){return a("el-radio",{key:t.id,attrs:{label:t.value,value:t.value}},[e._v("\n                "+e._s(t.value)+"\n                ")])}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"账号状态："}},[a("el-radio-group",{model:{value:e.requestParameters.accountStatus,callback:function(t){e.$set(e.requestParameters,"accountStatus",t)},expression:"requestParameters.accountStatus"}},e._l(e.common.enableState,function(t){return a("el-radio",{key:t.id,attrs:{label:t.value,value:t.value}},[e._v("\n                "+e._s(t.value)+"\n                ")])}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"部门："}},[a("el-radio-group",{model:{value:e.requestParameters.department,callback:function(t){e.$set(e.requestParameters,"department",t)},expression:"requestParameters.department"}},e._l(e.baseData.departments,function(t){return a("el-radio",{key:t.id,attrs:{label:t.value,value:t.value}},[e._v("\n                "+e._s(t.value)+"\n                ")])}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"工作城市："}},[a("el-radio-group",{model:{value:e.requestParameters.workingCity,callback:function(t){e.$set(e.requestParameters,"workingCity",t)},expression:"requestParameters.workingCity"}},e._l(e.baseData.isOverseas,function(t){return a("el-radio",{key:t.id,attrs:{label:t.value,value:t.value}},[e._v("\n                "+e._s(t.value)+"\n                ")])}),1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"showMore",class:{"show-more":e.showMore}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:e.handleRest}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.toggleShowMore}},[e._v(e._s(e.showMore?"收起▲":"展开▼"))])],1)],1)]),e._v(" "),""!==e.barSearch.alertText?a("el-alert",{staticClass:"alert",attrs:{title:e.barSearch.alertText,type:"info",closable:!1,"show-icon":""}}):e._e(),e._v(" "),a("div",{staticClass:"tags-container tagInfo"},e._l(e.seleList,function(t){return a("el-tag",{key:t,staticClass:"active",attrs:{"disable-transitions":!1,closable:""},on:{close:function(a){return e.seleClose(t)}}},[e._v("\n          "+e._s(t)+"\n        ")])}),1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.tables,"element-loading-text":"给我一点时间",fit:"","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{sortable:"",prop:"id",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"fullName",label:"姓名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"mobilePhone",label:"手机号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"workNumber",label:"工号",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"formOfEmployment",label:"聘用形势",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"department",label:"部门",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"timeOfEntry",label:"入职时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n             "+e._s(e._f("formatDate")(t.row.timeOfEntry))+"\n           ")]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",label:"账户状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return e.handleStatus(t.row)}},model:{value:t.row.accountStatus,callback:function(a){e.$set(t.row,"accountStatus",a)},expression:"scope.row.accountStatus"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("router-link",{staticClass:"el-button el-button--text el-button--small",attrs:{to:{path:"/employees/details/"+t.row.id}}},[e._v("\n              查看\n            ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handlPositive(t.row.id)}}},[e._v("转正")]),e._v(" "),a("router-link",{staticClass:"el-button el-button--text el-button--small",attrs:{to:{path:"/employees/adjustPost/"+t.row.id}}},[e._v("\n              调岗\n            ")]),e._v(" "),a("router-link",{staticClass:"el-button el-button--text el-button--small",attrs:{to:{path:"/employees/leave/"+t.row.id}}},[e._v("\n              离职\n            ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"page-size":e.requestParameters.pagesize,layout:"total, prev, pager, next",total:Number(e.counts)},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a(e.employeesAdd,{ref:"addUser",tag:"component",attrs:{formData:e.requestParameters,text:e.text,pageTitle:e.pageTitle,formBase:e.formData,baseData:e.baseData,ruleInline:e.ruleInline},on:{"update:formData":function(t){e.requestParameters=t},"update:form-data":function(t){e.requestParameters=t},clearFormDate:e.clearFormDate,newDataes:e.handleLoadDataList,handleCloseModal:e.handleCloseModal,doQuery:e.doQuery}}),e._v(" "),a(e.employeesPositive,{ref:"positive",tag:"component",attrs:{objInfoDataes:e.objInfoDataes,formData:e.requestParameters,text:e.text,pageTitle:e.pageTitle,formBase:e.formData,ruleInline:e.ruleInline},on:{"update:formData":function(t){e.requestParameters=t},"update:form-data":function(t){e.requestParameters=t},clearFormDate:e.clearFormDate,newDataes:e.handleLoadDataList,handleCloseModal:e.handleCloseModal}}),e._v(" "),a(e.employeesSet,{ref:"set",tag:"component",attrs:{objInfoDataes:e.objInfoDataes,formData:e.requestParameters,setData:e.setData},on:{"update:formData":function(t){e.requestParameters=t},"update:form-data":function(t){e.requestParameters=t},clearFormDate:e.clearFormDate,newDataes:e.handleLoadDataList,handleCloseModal:e.handleCloseModal}})],1)],1)])},staticRenderFns:[]};var p=a("C7Lr")(f,h,!1,function(e){a("QrnV")},"data-v-4cac8442",null);t.default=p.exports}});