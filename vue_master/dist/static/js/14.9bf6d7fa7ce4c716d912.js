webpackJsonp([14],{"0oly":function(t,e){},J3sW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("f0da"),l={name:"permissions-table-index",data:function(){return{MenuList:"menuList",type:0,pid:"",dialogFormVisible:!1,apiDialogVisible:!1,formData:{},dataList:[],apiList:[],pointEnable:{}}},methods:{setPid:function(t,e){this.pid=e,this.type=t},handleCreate:function(t){var e=this;t&&void 0!=t?Object(i.a)({id:t}).then(function(t){e.formData=t.data.data,e.dialogFormVisible=!0}):(this.formData={},this.dialogFormVisible=!0)},saveOrUpdate:function(){var t=this;this.formData.type=this.type,this.formData.pid=this.pid,Object(i.d)(this.formData).then(function(e){t.$message({message:e.data.message,type:e.data.success?"success":"error"}),e.data.success&&(t.formData={},t.dialogFormVisible=!1),3==t.type?t.handlerApiList(t.pid):(t.getList(),t.pointEnable={})})},handleDelete:function(t){var e=this;Object(i.c)({id:t}).then(function(t){e.$message({message:t.data.message,type:t.data.success?"success":"error"})})},getList:function(){var t=this;Object(i.b)({type:1,pid:0}).then(function(e){t.dataList=e.data.data})},show:function(t,e){var a=this;null==!this.pointEnable[e]||void 0==this.pointEnable[e]?Object(i.b)({type:2,pid:e}).then(function(i){if(i.data.data.length<=0)a.$message.error("无子权限");else{for(var l=0;l<i.data.data.length;l++)a.dataList.splice(t+1,0,i.data.data[l]);a.pointEnable[e]=i.data.data.length}}):(this.dataList.splice(t+1,this.pointEnable[e]),this.pointEnable[e]=null)},handlerApiList:function(t){var e=this;this.pid=t,Object(i.b)({type:3,pid:t}).then(function(t){e.apiList=t.data.data,e.apiDialogVisible=!0})}},created:function(){this.getList()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"app-container"},[a("el-card",{attrs:{shadow:"never"}},[a("el-button",{staticClass:"filter-item fr",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.handleCreate(null,1),t.setPid(1,"0")}}},[t._v("添加菜单")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.dataList,fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{fixed:"",prop:"name",label:"菜单名称",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{class:1==e.row.type?"ivu-icon fa fa-folder-open-o fa-fw":"ivu-icon  el-icon-view",style:1==e.row.type?"margin-left: 0px":"margin-left: 20px"}),t._v(" "),a("span",{on:{click:function(a){return t.show(e.$index,e.row.id)}}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"code",label:"权限标识",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"description",label:"描述",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleCreate(null,2),t.setPid(2,e.row.id)}}},[t._v("添加权限点")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handlerApiList(e.row.id)}}},[t._v("查看api权限")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleCreate(e.row.id,e.row.type),t.setPid(e.row.type,e.row.pid)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1),t._v(" "),a("el-dialog",{staticStyle:{hight:"100px","line-height":"1px"},attrs:{title:"编辑权限",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{model:t.formData,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"权限名称"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"权限标识"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"权限描述"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"企业可见"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-text":"可见","inactive-text":"不可见"},model:{value:t.formData.enVisible,callback:function(e){t.$set(t.formData,"enVisible",e)},expression:"formData.enVisible"}})],1),t._v(" "),1==t.type?a("div",[a("el-form-item",{attrs:{label:"菜单顺序"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.menuOrder,callback:function(e){t.$set(t.formData,"menuOrder",e)},expression:"formData.menuOrder"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单icon"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.menuIcon,callback:function(e){t.$set(t.formData,"menuIcon",e)},expression:"formData.menuIcon"}})],1)],1):2==t.type?a("div",[a("el-form-item",{attrs:{label:"按钮样式"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.pointClass,callback:function(e){t.$set(t.formData,"pointClass",e)},expression:"formData.pointClass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"按钮icon"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.pointIcon,callback:function(e){t.$set(t.formData,"pointIcon",e)},expression:"formData.pointIcon"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"按钮状态"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.pointStatus,callback:function(e){t.$set(t.formData,"pointStatus",e)},expression:"formData.pointStatus"}})],1)],1):3==t.type?a("div",[a("el-form-item",{attrs:{label:"api请求地址"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.apiUrl,callback:function(e){t.$set(t.formData,"apiUrl",e)},expression:"formData.apiUrl"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"api请求方式"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.apiMethod,callback:function(e){t.$set(t.formData,"apiMethod",e)},expression:"formData.apiMethod"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"api类型"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{autocomplete:"off"},model:{value:t.formData.apiLevel,callback:function(e){t.$set(t.formData,"apiLevel",e)},expression:"formData.apiLevel"}})],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveOrUpdate}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{staticStyle:{hight:"400px","line-height":"1px"},attrs:{title:"API权限列表",visible:t.apiDialogVisible},on:{"update:visible":function(e){t.apiDialogVisible=e}}},[a("el-button",{staticClass:"filter-item fr",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.handleCreate(null,1),t.setPid(3,t.pid)}}},[t._v("添加api权限")]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.apiList,fit:"","max-height":"250"}},[a("el-table-column",{attrs:{fixed:"",prop:"name",label:"菜单名称",width:"120px"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"code",label:"权限标识",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"description",label:"描述",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleCreate(e.row.id,e.row.type),t.setPid(e.row.type,e.row.pid)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleDelete(e.row.id),t.handlerApiList(t.pid)}}},[t._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(l,o,!1,function(t){a("u7+m"),a("0oly")},"data-v-d98e6d2e",null);e.default=s.exports},"u7+m":function(t,e){}});